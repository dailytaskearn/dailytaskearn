<!DOCTYPE html>
<html>
<head>
  <title>User Panel - Daily Task Earn</title>
  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-database.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAL1SsfBNXUiSXC3hySfw4M-JTlLqiGMEE",
      authDomain: "dailytask-earn.firebaseapp.com",
      projectId: "dailytask-earn",
      storageBucket: "dailytask-earn.firebasestorage.app",
      messagingSenderId: "807698894430",
      appId: "1:807698894430:web:03e3df5216a2dfc7a52ecf"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
  </script>
  <style>
    body { font-family: sans-serif; background: #f2f2f2; padding: 20px; }
    .box { max-width: 450px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; }
    input, button { padding: 10px; width: 100%; margin-top: 10px; }
    h2, h3 { text-align: center; }
    .section { margin-top: 30px; }
  </style>
</head>
<body>
  <div class="box">
    <h2>Welcome to Daily Task Earn</h2>

    <div class="section">
      <h3>Withdraw Request</h3>
      <input type="text" id="username" placeholder="Your Username">
      <input type="number" id="amount" placeholder="Amount (Rs)">
      <input type="text" id="trx" placeholder="TRX ID or Screenshot Link">
      <button onclick="submitWithdraw()">Submit Withdraw Request</button>
    </div>

    <div class="section">
      <h3>Your Balance</h3>
      <input type="text" id="balanceUser" placeholder="Enter Username to Check Balance">
      <button onclick="getBalance()">Check Balance</button>
      <p id="balanceOutput"></p>
    </div>
  </div>

  <script>
    function submitWithdraw() {
      const username = document.getElementById("username").value;
      const amount = document.getElementById("amount").value;
      const trx = document.getElementById("trx").value;

      if (!username || !amount || !trx) {
        alert("Please fill all fields!");
        return;
      }

      const newReq = db.ref("withdrawRequests").push();
      newReq.set({ username, amount, trx, status: "pending" });

      alert("Withdraw request submitted!");
      document.getElementById("username").value = "";
      document.getElementById("amount").value = "";
      document.getElementById("trx").value = "";
    }

    function getBalance() {
      const uname = document.getElementById("balanceUser").value;
      if (!uname) return alert("Enter username");

      db.ref("users/" + uname + "/balance").once("value").then(snapshot => {
        const bal = snapshot.val();
        document.getElementById("balanceOutput").innerText = 
          bal !== null ? `Your Balance: Rs ${bal}` : "No balance record found.";
      });
    }
  </script>
</body>
</html>
